<md-content class="md-padding propsIndex">
  <md-card class="md-padding searchProperties">

    <md-card-title>
      <md-card-title-text>
        <span class="md-headline">Search Properties</span>
        <md-divider ng-if="!$last"></md-divider>
      </md-card-title-text>
    </md-card-title>

    <form
      name="propsIndex.propsIndexForm"
      class="propsIndex.propsIndexForm"
      novalidate
      >
      <div class="propertiesSearch">
        <div>
          <md-input-container class="md-block">
            <md-icon class="material-icon">search</md-icon>
            <label for="area">Location: </label>
            <input
              type="text"
              class="area"
              id="area"
              ng-model="propsIndex.area"
              ng-required="true"
              placeholder="e.g. Chelsea, SW3 or Sloane Square Station"
              aria-label="Location (required)"
              >
          </md-input-container>

          <!-- <div
            class="alert alert-danger"
            role="alert"
            ng-messages="propsIndex.propsIndexForm.area.$error"
            ng-show="(propsIndex.propsIndexForm.$submitted || propsIndex.propsIndexForm.area.$touched) && propsIndex.propsIndexForm.area.$invalid"
            >
            <div ng-message="required">Please enter a location.</div>
          </div> -->
        </div>

        <div>
          <md-input-container class="md-block">
            <md-icon class="material-icon">single_bed</md-icon>
            <label for="area">Bedrooms</label>
              <md-select
                name="beds"
                class="beds"
                id="beds"
                ng-model="propsIndex.beds"
                ng-required="true"
                aria-label="Bedroom (required)"
                >
                <md-option ng-value="any" ng-selected="true" ng-disabled="true">Any</md-option>
                <md-option ng-value="1">1</md-option>
                <md-option ng-value="2">2</md-option>
                <md-option ng-value="3">3</md-option>
                <md-option ng-value="4">4</md-option>
                <md-option ng-value="5">4</md-option>
              </md-select>
              <!-- <label for="beds">Bendroom: </label> -->
              <!-- <input
                type="number"
                class="bedrooms"
                ng-model="propsIndex.beds"
                ng-require="required"
                aria-label="Bedroom (required)"
                > -->
          </md-input-container>

          <!-- <div
            class="alert alert-danger"
            role="alert"
            ng-messages="propsIndex.propsIndexForm.beds.$error"
            ng-show="(propsIndex.propsIndexForm.$submitted || propsIndex.propsIndexForm.beds.$touched) && propsIndex.propsIndexForm.beds.$invalid"
            >
            <div ng-message="required">Please enter number of bedrooms.</div>
          </div> -->
        </div>
      </div>

      <div>
        <md-card-actions>
          <md-button
            class="md-raised md-primary md-button md-ink-ripple search"
            ng-click="propsIndex.getProps()"
            >
            Search
          </md-button>
        </md-card-actions>
      </div>
    </form>

  </md-card>

  <md-card ng-show="propsIndex.showResults()" class="md-padding searchResults" layout="row" layout-wrap>
    <div class="foundListings">
      <span class="md-heading listings">Found {{ propsIndex.results.result_count }} Listings</span>
      <md-divider ng-if="!$last"></md-divider>
    </div>

    <md-card class="md-padding searchResultsCard" ng-repeat="props in propsIndex.results.listing | limitTo: propsIndex.limit">
      <img ng-src="{{ props.image_645_430_url }}" class="ZooplaImage">

      <md-card-title>
        <md-card-title-text>
          <span class="md-headline">{{ props.displayable_address }}</span>
        </md-card-title-text>
      </md-card-title>

      <md-card-content>
        <h3><strong>Address: </strong>{{ props.displayable_address }}</h3>
        <h3><strong>Price Per Month: </strong>Â£{{ props.rental_prices.per_month }}</h3>
        <h3><strong>Bedrooms: </strong>{{ props.num_bedrooms }}</h3>
        <h3><strong>Property Type: </strong>{{ props.property_type }}</h3>
      </md-card-content>

      <md-card-actions layout="row" layout-align="end center">
        <md-button class="md-raised md-primary md-button md-ink-ripple moreInfoButton" ng-click="propsIndex.showProperty(props)">More Info</md-button>
      </md-card-actions>
    </md-card>

    <md-card-actions class="loadMore">
      <md-button ng-if="propsIndex.results.listing" ng-click="propsIndex.loadMore()" class="md-raised md-primary md-button md-ink-ripple loadMore">Load More Properties</md-button>
    </md-card-actions>
  </md-card>
</md-content>
